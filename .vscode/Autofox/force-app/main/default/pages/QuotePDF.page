<apex:page standardController="Quote" extensions="QuotePDFController" renderAs="pdf" showHeader="false" standardStylesheets="false">
    <!-- Header Section -->
    <div style="padding: 0px 20px; text-align: left;">
        <!-- Logo from Static Resource -->
        <div style="float: left; margin-top: 10px;">
            <apex:image url="{!$Resource.Logo}" alt="Company Logo" style="width: 250px;" />
        </div>
        
        <!-- Company Info on Right -->
        <div style="text-align: right; font-size: 9pt; color: #666; line-height: 1.2; float: right; margin-top: 10px; font-family: 'Arial', sans-serif;">
            <div>{!$Label.CompanyStreet}</div>
            <div>{!$Label.CompanyStreet2line}</div>
            <div><strong>Tel.</strong> {!$Label.CompanyTel}</div>
            <div><strong>Fax.</strong> {!$Label.CompanyFax}</div>
            <div>{!$Label.CompanyEmail}</div>
            <div>{!$Label.CompanyInfoWebsite}</div>
            <div>{!$Label.CompanyInfo}</div>
            <div>{!$Label.CompanyInfo2}</div>
        </div>
        <div style="clear: both;"></div>
    </div>
    
    <!-- Recipient Address Section -->
    <div style="padding: 20px 20px 0 20px; font-size: 10pt; font-family: 'Arial', sans-serif; line-height: 1.3;">
        {!primaryContact.Salutation}<br/>
        {!primaryContact.Name}<br/>
        {!opportunityRecord.Account.Name}<br/>
        {!primaryContact.MailingStreet}<br/>
        {!primaryContact.Mailingpostalcode} {!primaryContact.MailingCity}<br/>
    </div>
    
    <!-- Offer Number Section -->
    <div style="text-align: right; padding: 10px 20px; font-size: 10pt; font-family: 'Arial', sans-serif;">
        {!$Label.QuoteNumber} {!quoteRecord.quoteNumber} / <span>{!formattedDate}</span>
    </div>
    
    <!-- Salutation -->
    <div style="padding: 10px 20px; font-size: 10pt; font-family: 'Arial', sans-serif;">
        Sehr geehrte {!primaryContact.Salutation} {!primaryContact.LastName}!
    </div>
    
    <!-- Main Product Section -->
    <div style="padding: 10px 20px; font-size: 10pt; font-family: 'Arial', sans-serif; line-height: 1.4;">
        <p>{!$Label.EnquiryMessage}</p>

        <!-- Display Main Product -->
        <div style="padding: 10px 20px; font-size: 10pt; font-family: 'Arial', sans-serif; line-height: 1.4; page-break-inside: avoid;">
            <p style="font-weight: bold; line-height: 1.4;">{!mainProduct.Product2.QTE_ProductTitle__c}</p>

            <!-- Flexbox Layout for Image and Text -->
            <div style="display: table; width: 100%;">
                <!-- Product Image on the Left with Adjusted Width and Margin -->
                <div style="display: table-cell; width: 15%; vertical-align: top;">
                    <apex:image url="/sfc/servlet.shepherd/version/download/{!productImageMap[mainProduct.Product2Id].LatestPublishedVersionId}" 
                                alt="{!mainProduct.Product2.Name}" style="width: 120%; margin-left: -30px;" />
                </div>

                <!-- Product Description on the Right -->
                <div style="display: table-cell; margin-left: -10px; vertical-align: top; text-align: justify; line-height: 1.4;">
                    <p>{!mainProduct.Product2.QTE_ProductDescription__c}</p>
                    <p><strong>{!$Label.Dimension}</strong> {!mainProduct.Product2.QTE_ProductDimension__c} </p>

                    <!-- Product Table for Main Product -->
                    <table style="width: 100%; border-collapse: collapse; font-size: 8pt;">
                        <tr>
                            <td style="width: 20%;">{!mainProduct.Product2.ProductCode}</td>
                            <td style="width: 60%;">{!mainProduct.Product2.QTE_ProductShortDescription__c}</td>
                            <td style="width: 20%; text-align: right; white-space: nowrap;">{!mainProduct.TotalPrice}</td>
                        </tr>
                        <tr>
                            <apex:repeat value="{!accessoryProducts}" var="item2">
                                <tr>
                                    <td style="width: 20%;">{!item2.Product2.ProductCode}</td>
                                    <td style="width: 60%;">{!item2.Product2.QTE_ProductShortDescription__c}</td>
                                    <td style="width: 20%; text-align: right; white-space: nowrap;">{!item2.TotalPrice}</td>
                                </tr>
                            </apex:repeat>    
                        </tr>
                        <tr>
                            <td style="border-top: .5px solid black;"></td>
                            <td colspan="1" style="border-top: .5px solid black; padding-top: 5px;">
                                <span style="background-color: yellow;">{!$Label.ExchangePrice}</span>
                            </td>
                            <td style="border-top: .5px solid black; padding-top: 5px; text-align: right;">
                                <span style="background-color: yellow;">{!quoteRecord.TotalPriceAfterDiscount__c }</span>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Delivery and Payment Information -->
    <table style="width: 100%; font-family: Arial, sans-serif; font-size: 10pt; line-height: 1.4;  page-break-inside: avoid;">
        <tr>
            <td style="font-weight: bold; width: 30%;">{!$Label.Delivery}</td>
            <td>ca. 8 Wochen</td>
        </tr>
        <tr>
            <td style="font-weight: bold;">{!$Label.Payment}</td>
            <td>30 Tage netto Kassa</td>
        </tr>
        <tr>
            <td style="font-weight: bold;">{!$Label.Preise}</td>
            <td>{!$Label.ExcludingVat}</td>
        </tr>
        <tr>
            <td></td>
            <td>{!$Label.GroupDiscount}</td>
        </tr>
        <tr>
            <td style="font-weight: bold;">{!$Label.QuoteEndDate} </td>
            <td>{!TEXT(DAY(quoteRecord.ExpirationDate))}.{!TEXT(MONTH(quoteRecord.ExpirationDate))}.{!TEXT(YEAR(quoteRecord.ExpirationDate))}</td>
        </tr>
    </table>
    
    <!-- Contact Section -->
    <div style="font-size: 10pt; font-family: 'Arial', sans-serif; line-height: 1.3;">
        <p><br />{!$Label.EndNote} <br /> </p>
        <p>Ing. {!quoteRecord.Opportunity.Owner.Name} <br/>
            <a href="mailto:{!quoteRecord.Opportunity.Owner.Email}">{!quoteRecord.Opportunity.Owner.Email}</a></p>
    </div>
    
    <!-- Footer Note Section -->
    <div style="font-size: 8pt; text-align: justify; font-family: 'Arial', sans-serif; line-height: 1.4;">
        <p><i>{!$Label.Disclaimer1}</i></p>
        <p><i>{!$Label.Disclaimer2}</i></p>
    </div>
    
    <!-- Footer Blue Line -->
    <div style="position: fixed; bottom: 0; left: 0; width: 100%; height: 5px; background-color: #3355FF;">
        <!-- Blue line will render here -->
    </div>
</apex:page>
